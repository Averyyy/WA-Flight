<!DOCTYPE html>
<html>

<head>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link rel="stylesheet" href="../static/index_view.css" />
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
		google.charts.load('current', {
				packages: ['corechart']
		});
</script>
	<header id='header'>
		<nav class="navbar navbar-expand-lg navbar-light bg-light"  >
			<div class="container-fluid" >
				<a class="navbar-brand" href="#">WAFlight</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" href="#">Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#">Admin</a>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
								About us
							</a>
							<ul class="dropdown-menu" aria-labelledby="navbarDropdown">
								<li><a class="dropdown-item" href="#">Wendy</a></li>
								<li><a class="dropdown-item" href="#">Avery action</a></li>
								<li><hr class="dropdown-divider"></li>
								<li><a class="dropdown-item" href="#">Something else here</a></li>
							</ul>
						</li>
						<!-- <li class="nav-item">
						<a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
					</li> -->
				</ul>
				<form class="d-flex" >

					<a href="{{ url_for("sign_out") }}">
						<input type = 'button' class="btn btn-outline-success"  style="margin-right: 10pt; color = white;" value="Sign out"/>
					</a>
				</form>
			</div>
		</div>
	</nav>
	<!-- <a>WAFlight Booking</a> -->
</header>
<!-- <div id='sign'>
<a href="{{ url_for("sign_up") }}">Sign up  </a>
<a href="{{ url_for("sign_in") }}">  Sign in</a>
</div> -->
	 <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
        google.charts.load('current', {
            packages: ['corechart']
        });
    </script>

</head>

<body>
	<div class='container'>
		<div class='stripe-text'>Find Flight Deals</div>
	</div>

	<form action="/public_view" method="post">
		<div class="form__group field" id='from'>
			<input type="input" class="form__field" placeholder="Departure"  list="list1"  autocomplete="off" name="from" required />
			<label for="from" class="form__label">Departure</label>
			<datalist id="list1">
				{% for i in departure_city %}
				<option>{{ i }}</option>
				{% endfor %}
			</datalist>
		</div>
		<!--			To City:<br>-->
		<div class="form__group field"  id='to'>
			<input type="input" class="form__field" placeholder="Arrival"  list="list2"  autocomplete="off" name="to" required />
			<label for="from" class="form__label">Arrival</label>
		<datalist id="list2">
			{% for i in arrival_city %}
			<option>{{ i }}</option>
			{% endfor %}
		</datalist>
			</div>
			<div class="form__group field" id='date'>
				<input type="date" class="form__field" placeholder="" name="date" required />
				<label for="from" class="form__label">Departure_time</label>
				</div>
		<!-- <div  id = 'search'> -->
				<button id = 'search'><input type="submit" value='Search' /id = 'ugly' class="search">Search</button>
		<!-- </div> -->
	</form>

<!-- <div class="tables"> -->
	<div class="containertable" id = 'all'>
		All:
		<table>
			<thead>
				<tr>
					<th scope="col">Airline name</th>
					<th scope="col">Flight number</th>
					<th scope="col">Departure time</th>
					<th scope="col">Arrivel time</th>
					<th scope="col">Price</th>
					<th scope="col">Status</th>
					<th scope="col">Departure</th>
					<th scope="col">Arrival</th>
				</tr>
			</thead>
			<tbody>
				<th scope="row" id='ugly'></th>
				{% for i in all %}
				<tr>
					<td>{{ i['airline_name']}}</td>
					<td>{{ i['flight_num']}}</td>
					<td>{{ i['departure_time']}}</td>
					<td>{{ i['arrival_time']}}</td>
					<td>{{ i['price']}}</td>
					<td>{{ i['status']}}</td>
					<td>{{ i['Departure']}}</td>
					<td>{{ i['Arrival']}}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>

	<form class="d-flex" >

					<button id = 'Purchase'><input type="submit" value='Purchase' /id = 'ugly' class="search">Purchase</button>

		<div class="form__group field"  id='Customer'>
		<input type="input" class="form__field" placeholder="Customer:"  list="list3"  autocomplete="off" name="to" required />
		<label for="from" class="form__label">Customer:</label>
		<datalist id="list3">
			{% for i in airlines %}
			<option>{{ i }}</option>
			{% endfor %}
		</datalist>
	</div>

	<div class="form__group field"  id='flight_num'>
		<input type="input" class="form__field" placeholder="Flight Number:"  list="list4"  autocomplete="off" name="to" required />
		<label for="from" class="form__label">Flight Number:</label>
		<datalist id="list4">
			{% for i in flight_num %}
			<option>{{ i }}</option>
			{% endfor %}
		</datalist>
	</div>
	</form>

	<!--<default view of upcoming schedule>-->
	<div class="containertable" id = 'history'>
		Your history:
		<table>
			<thead>
				<tr>
					<th scope="col">Airline name</th>
					<th scope="col">Flight number</th>
					<th scope="col">Departure time</th>
					<th scope="col">Arrivel time</th>
					<th scope="col">Price</th>
					<th scope="col">Status</th>
					<th scope="col">Departure</th>
					<th scope="col">Arrival</th>
				</tr>
			</thead>
			<tbody>
				<th scope="row" id='ugly'></th>
				{% for i in purchased %}
				<tr>
					<td>{{ i['airline_name']}}</td>
					<td>{{ i['flight_num']}}</td>
					<td>{{ i['departure_time']}}</td>
					<td>{{ i['arrival_time']}}</td>
					<td>{{ i['price']}}</td>
					<td>{{ i['status']}}</td>
					<td>{{ i['Departure']}}</td>
					<td>{{ i['Arrival']}}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>

	{% if data_list %}
	{% set d = data_list %}


	    <div id="container" style="width: 550px; height: 400px; margin: 0 auto; display:block; background:transparent; position:absolute; left:25pt; top:500pt;"></div>
	    <script language="JavaScript">
	        function drawChart() {
	            var data = google.visualization.arrayToDataTable({{data_list|safe}})
	            var options = {
	                title: 'Page visit per year',
	                isStacked: true,
									    // backgroundColor: '#E4E4E4',
									is3D: true,
									backgroundColor: {
        fill: '#FF0000',
        fillOpacity: 0
      },
	            };
	            /Instantiate and draw the chart.*/
	            var chart = new google.visualization.BarChart(document.getElementById('container'));
	            chart.draw(data, options);
	        }
	        google.charts.setOnLoadCallback(drawChart);
	    </script>
	{% endif %}
<div class="commission"> Total commission:{{total_month}} <br>
	Average commission: {{avg_month}} </div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
</body>

</html>
